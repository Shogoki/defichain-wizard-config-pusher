"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MessageCompressor = void 0;
const helpers_1 = require("./helpers");
// const LZUTF8 = require("lzutf8");
// const BASE_ENCODING = "Base64";
class MessageCompressor {
    /**
     * Compresses the Custom Message.
     * @param data The custom message to be compressed.
     * @returns The compressed data as string.
     */
    static compress(data) {
        // return LZUTF8.compress(JSON.stringify(data), {
        //   outputEncoding: BASE_ENCODING,
        // });
        return JSON.stringify(data); //TODO: For now we do not compress, but will need to take a look at it later
    }
    /**
     * Decompresses the compressed string to get the original Custom Message.
     * @param data The data to be decompressed.
     * @returns The original Custom Message from the frontend.
     */
    static decompress(data) {
        // const uncompressed = LZUTF8.decompress(data, {
        //   inputEncoding: BASE_ENCODING,
        // });
        const uncompressed = data; //TODO: For now we do not compress, but will need to take a look at it later
        const customMessage = JSON.parse(uncompressed);
        if ((0, helpers_1.isCustomMessage)(customMessage))
            return customMessage;
        if ((0, helpers_1.isVersionMessage)(customMessage))
            return customMessage;
        throw new Error("Message decompression failed. The returned object is not a valid message.");
    }
}
exports.MessageCompressor = MessageCompressor;
